
@{
    /**/

    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";

}


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    //todaysOrders
    <table class="table">
        <tr class="row header btn-dark">

            <th class="cell">
                @Html.DisplayName("Stock")
            </th>
            <th class="cell">
                @Html.DisplayName("Quantity")
            </th>
            <th class="cell">
                @Html.DisplayName("Date(Day/Month/Year)")
            </th>
            <th class="cell">
                @Html.DisplayName("State")
            </th>
            <th class="cell">
                @Html.DisplayName("Type")
            </th>

        </tr>

        @foreach (var item in ViewBag.TodaysOrders)
        {
            <tr class="row">

                <td class="cell">
                    @item.Stock.CompanyEN
                </td>
                <td class="cell">
                    @item.Quantity
                </td>
                <td class="cell">
                    @item.Date.Day/@item.Date.Month/@item.Date.Year
                </td>
                <td class="cell">
                    @item.StateEN
                </td>
                <td class="cell">
                    @item.TypeEN
                </td>


            </tr>
        }

    </table>



    //UserStocks
    <table class="table">
        <tr class="row header btn-dark">

            <th class="cell">
                @Html.DisplayName("Stock")
            </th>
            <th class="cell">
                @Html.DisplayName("Price")
            </th>

        </tr>

        @foreach (var item in ViewBag.StockOrders)
        {

            <tr class="row">

                <td class="cell">
                    @item.Stock.CompanyEN
                </td>
                <td class="cell">
                    @item.Stock.Price
                </td>

            </tr>
        }



 

    </table>

    //pieChart
   
   
         <!--Div that will hold the pie chart-->
            <div id="chart_div"></div>
  




}



<div style="width:1230px;height:1200px" id="piechart"></div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

        var data = new google.visualization.DataTable();
        // Add columns
        data.addColumn('string', 'stock');
        data.addColumn('number', 'Quantity');

        data.addRows([
            @{int count = 0;}

              @foreach (var item in ViewBag.pieChartElements)
              {
                  if(count>0)
                  {
                      @Html.Raw(",['" + ViewBag.pieChartElements[count].Stock.CompanyEN + "'," + ViewBag.pieChartElements[count].TotalQuantity* ViewBag.pieChartElements[count].Stock.Price + "]");

                  }
                  else
                  {
                      @Html.Raw("['" + ViewBag.pieChartElements[count].Stock.CompanyEN + "'," + ViewBag.pieChartElements[count].TotalQuantity * ViewBag.pieChartElements[count].Stock.Price + "]");
                  }
                  count++;

              }

        ]);

        var options = {
            title: 'Stocks',
            width: '200%',
            height: '1000px'
        };

            var chart = new google.visualization.PieChart(document.getElementById('piechart'));

            chart.draw(data, options);
    }
</script>




















<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">

    // Load the Visualization API and the corechart package.
    google.charts.load('current', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows(
            ['Mushrooms', 3],
            ['Onions', 1],
            ['Olives', 1],
            ['Zucchini', 1],
            ['Pepperoni', 2]
        );


        // Set chart options
        var options = {
            'title': 'How Much Pizza I Ate Last Night',
            'width': 400,
            'height': 300
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
</script>



